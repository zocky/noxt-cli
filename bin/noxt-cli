#!/usr/bin/env node
import minimist from 'minimist';
//import 'console-with-location';

import  * as cmd_start  from './cmd_start.js';
import  * as cmd_create  from './cmd_create.js';

const commands = {
  start: cmd_start,
  create: cmd_create,
};

const { _: args, ...options } = minimist(process.argv.slice(2), {
  string: ['views'],   // treat as strings
  unknown: (arg) => true
});

const cmd = args.shift() ?? 'start';

if (cmd in commands) {
  await commands[cmd].execute(args, options);
} else {
  console.log(`Usage: noxt-cli <${Object.keys(commands).join('|')}> [options]`);
  process.exit(1);
}
